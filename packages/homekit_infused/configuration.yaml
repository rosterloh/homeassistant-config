
# Required Configuration file for HKI, it is best to leave this alone!

lovelace_gen: !include ../../user_content/extra_settings.yaml

homeassistant:
  customize_glob:
    "input_boolean.button_alarm_*":
      friendly_name: Alarm
      icon: mdi:alert
    "input_boolean.button_climate_*":
      friendly_name: Climate
      icon: mdi:thermostat
    "input_boolean.button_light_*":
      friendly_name: Light
      icon: mdi:floor-lamp
    "input_boolean.button_device_*":
      friendly_name: Device
      icon: mdi:power-plug
    "input_boolean.button_security_*":
      friendly_name: Security
      icon: mdi:cctv
    "input_boolean.button_cleaning_*":
      friendly_name: Cleaning
      icon: mdi:calendar-edit
    "input_boolean.button_scene_*":
      friendly_name: Scene
      icon: mdi:arrange-send-backward
    "input_boolean.button_vacuum_*":
      friendly_name: Vacuum
      icon: mdi:robot-vacuum
    "input_boolean.button_remote_*":
      friendly_name: Remote
      icon: mdi:remote
    "input_boolean.button_battery_*":
      friendly_name: Battery
      icon: mdi:battery
    "input_boolean.button_automation_*":
      friendly_name: Automation
      icon: mdi:auto-fix
    "input_boolean.button_download_*":
      friendly_name: Download
      icon: mdi:download
    "input_boolean.button_energy_*":
      friendly_name: Energy
      icon: mdi:chart-line
    "input_boolean.button_location_*":
      friendly_name: Location
      icon: mdi:navigation
    "input_boolean.button_laundry_*":
      friendly_name: Laundry
      icon: mdi:washing-machine
    "input_boolean.button_computer_*":
      friendly_name: Computers
      icon: mdi:server
    "input_boolean.button_calendar_*":
      friendly_name: Calendar
      icon: mdi:calendar
    "input_boolean.button_system_*":
      friendly_name: System
      icon: mdi:home-analytics
    "input_boolean.button_floorplan_*":
      friendly_name: Floorplan
      icon: mdi:floor-plan
    "input_boolean.button_media_*":
      friendly_name: Media
      icon: mdi:plex
    "input_boolean.button_traffic_*":
      friendly_name: Traffic
      icon: mdi:waze
    "input_boolean.button_weather_*":
      friendly_name: Weather
      icon: mdi:weather-partly-cloudy
    "input_boolean.button_settings_*":
      friendly_name: HKI Settings
      icon: mdi:tools
    "input_boolean.button_homeassistant_*":
      friendly_name: HA Settings
      icon: mdi:tools

group: !include ../../user_content/rooms_and_groups.yaml

automation:
  # State Change Automations used for device counting
  - alias: 'group state change'
    id: 'State changed'
    trigger:
      platform: event
      event_type: state_changed
    condition: 
      condition: or
      conditions:
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_lighting','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_device_switches','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_climate_entities','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_computers','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_tvs','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_binary_sensors','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_laundry_devices','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_door_sensors','entity_id') }}
        - condition: template
          value_template: >
            {{ trigger.event.data.entity_id in state_attr('group.all_window_sensors','entity_id') }}
    action:
      service: homeassistant.update_entity
      entity_id: 
        - sensor.current_lights_on
        - sensor.current_devices_on
        - sensor.current_climate_entities_on
        - sensor.current_computers_on
        - sensor.current_tvs_on
        - sensor.current_laundry_devices_on
        - sensor.current_sensors_on
        - sensor.current_doors_open
        - sensor.current_windows_open
        - sensor.current_binary_sensors_on
  
#  - alias: 'Room Selector Devices'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_0_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_0_room_selector', '1') %}
#              input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '2') %}
#              input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '3') %}
#              input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '4') %}
#              input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '5') %}
#              input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '6') %}
#              input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '7') %}
#              input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '8') %}
#              input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '9') %}
#              input_boolean.devices_room_10 
#            {% else %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10 
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_0_room_selector', '1') %}
#              input_boolean.devices_room_01
#            {% elif is_state('input_select.floor_0_room_selector', '2') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02
#            {% elif is_state('input_select.floor_0_room_selector', '3') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03
#            {% elif is_state('input_select.floor_0_room_selector', '4') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04
#            {% elif is_state('input_select.floor_0_room_selector', '5') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05
#            {% elif is_state('input_select.floor_0_room_selector', '6') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06
#            {% elif is_state('input_select.floor_0_room_selector', '7') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07
#            {% elif is_state('input_select.floor_0_room_selector', '8') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08
#            {% elif is_state('input_select.floor_0_room_selector', '9') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09
#            {% elif is_state('input_select.floor_0_room_selector', '10') %}
#              input_boolean.devices_room_01, input_boolean.devices_room_02, input_boolean.devices_room_03, input_boolean.devices_room_04, input_boolean.devices_room_05, input_boolean.devices_room_06, input_boolean.devices_room_07, input_boolean.devices_room_08, input_boolean.devices_room_09, input_boolean.devices_room_10
#            {% endif %}
#
#  - alias: 'Room Selector Devices Second Floor'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_1_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_1_room_selector', '1') %}
#              input_boolean.devices_room_12, input_boolean.devices_room_13, input_boolean.devices_room_14, input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '2') %}
#              input_boolean.devices_room_13, input_boolean.devices_room_14, input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '3') %}
#              input_boolean.devices_room_14, input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '4') %}
#              input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '5') %}
#              input_boolean.devices_room_16
#            {% else %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12, input_boolean.devices_room_13, input_boolean.devices_room_14, input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_1_room_selector', '1') %}
#              input_boolean.devices_room_11
#            {% elif is_state('input_select.floor_1_room_selector', '2') %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12
#            {% elif is_state('input_select.floor_1_room_selector', '3') %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12, input_boolean.devices_room_13
#            {% elif is_state('input_select.floor_1_room_selector', '4') %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12, input_boolean.devices_room_13, input_boolean.devices_room_14
#            {% elif is_state('input_select.floor_1_room_selector', '5') %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12, input_boolean.devices_room_13, input_boolean.devices_room_14, input_boolean.devices_room_15
#            {% elif is_state('input_select.floor_1_room_selector', '6') %}
#              input_boolean.devices_room_11, input_boolean.devices_room_12, input_boolean.devices_room_13, input_boolean.devices_room_14, input_boolean.devices_room_15, input_boolean.devices_room_16
#            {% endif %}
#
#  - alias: 'Room Selector Devices Third Floor'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_2_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_2_room_selector', '1') %}
#              input_boolean.devices_room_18, input_boolean.devices_room_19, input_boolean.devices_room_20
#            {% elif is_state('input_select.floor_2_room_selector', '2') %}
#              input_boolean.devices_room_19, input_boolean.devices_room_20
#            {% elif is_state('input_select.floor_2_room_selector', '3') %}
#              input_boolean.devices_room_20
#            {% else %}
#              input_boolean.devices_room_17, input_boolean.devices_room_18, input_boolean.devices_room_19, input_boolean.devices_room_20
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_2_room_selector', '1') %}
#              input_boolean.devices_room_17
#            {% elif is_state('input_select.floor_2_room_selector', '2') %}
#              input_boolean.devices_room_17, input_boolean.devices_room_18
#            {% elif is_state('input_select.floor_2_room_selector', '3') %}
#              input_boolean.devices_room_17, input_boolean.devices_room_18, input_boolean.devices_room_19
#            {% elif is_state('input_select.floor_2_room_selector', '4') %}
#              input_boolean.devices_room_17, input_boolean.devices_room_18, input_boolean.devices_room_19, input_boolean.devices_room_20
#            {% endif %}
#
#  - alias: 'Room Selector Lights'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_0_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_0_room_selector', '1') %}
#              input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '2') %}
#              input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '3') %}
#              input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '4') %}
#              input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '5') %}
#              input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '6') %}
#              input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '7') %}
#              input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '8') %}
#              input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% elif is_state('input_select.floor_0_room_selector', '9') %}
#              input_boolean.lights_room_10 
#            {% else %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10 
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_0_room_selector', '1') %}
#              input_boolean.lights_room_01
#            {% elif is_state('input_select.floor_0_room_selector', '2') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02
#            {% elif is_state('input_select.floor_0_room_selector', '3') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03
#            {% elif is_state('input_select.floor_0_room_selector', '4') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04
#            {% elif is_state('input_select.floor_0_room_selector', '5') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05
#            {% elif is_state('input_select.floor_0_room_selector', '6') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06
#            {% elif is_state('input_select.floor_0_room_selector', '7') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07
#            {% elif is_state('input_select.floor_0_room_selector', '8') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08
#            {% elif is_state('input_select.floor_0_room_selector', '9') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09
#            {% elif is_state('input_select.floor_0_room_selector', '10') %}
#              input_boolean.lights_room_01, input_boolean.lights_room_02, input_boolean.lights_room_03, input_boolean.lights_room_04, input_boolean.lights_room_05, input_boolean.lights_room_06, input_boolean.lights_room_07, input_boolean.lights_room_08, input_boolean.lights_room_09, input_boolean.lights_room_10
#            {% endif %}
#
#  - alias: 'Room Selector Lights Second Floor'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_1_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_1_room_selector', '1') %}
#              input_boolean.lights_room_12, input_boolean.lights_room_13, input_boolean.lights_room_14, input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '2') %}
#              input_boolean.lights_room_13, input_boolean.lights_room_14, input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '3') %}
#              input_boolean.lights_room_14, input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '4') %}
#              input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% elif is_state('input_select.floor_1_room_selector', '5') %}
#              input_boolean.lights_room_16
#            {% else %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12, input_boolean.lights_room_13, input_boolean.lights_room_14, input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_1_room_selector', '1') %}
#              input_boolean.lights_room_11
#            {% elif is_state('input_select.floor_1_room_selector', '2') %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12
#            {% elif is_state('input_select.floor_1_room_selector', '3') %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12, input_boolean.lights_room_13
#            {% elif is_state('input_select.floor_1_room_selector', '4') %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12, input_boolean.lights_room_13, input_boolean.lights_room_14
#            {% elif is_state('input_select.floor_1_room_selector', '5') %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12, input_boolean.lights_room_13, input_boolean.lights_room_14, input_boolean.lights_room_15
#            {% elif is_state('input_select.floor_1_room_selector', '6') %}
#              input_boolean.lights_room_11, input_boolean.lights_room_12, input_boolean.lights_room_13, input_boolean.lights_room_14, input_boolean.lights_room_15, input_boolean.lights_room_16
#            {% endif %}
#
#  - alias: 'Room Selector Lights Third Floor'
#    trigger:
#      - platform: state
#        entity_id: input_select.floor_2_room_selector
#    action:
#      - service: input_boolean.turn_off
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_2_room_selector', '1') %}
#              input_boolean.lights_room_18, input_boolean.lights_room_19, input_boolean.lights_room_20
#            {% elif is_state('input_select.floor_2_room_selector', '2') %}
#              input_boolean.lights_room_19, input_boolean.lights_room_20
#            {% elif is_state('input_select.floor_2_room_selector', '3') %}
#              input_boolean.lights_room_20
#            {% else %}
#              input_boolean.lights_room_17, input_boolean.lights_room_18, input_boolean.lights_room_19, input_boolean.lights_room_20
#            {% endif %}
#      - service: input_boolean.turn_on
#        data_template:
#          entity_id: >-
#            {% if is_state('input_select.floor_2_room_selector', '1') %}
#              input_boolean.lights_room_17
#            {% elif is_state('input_select.floor_2_room_selector', '2') %}
#              input_boolean.lights_room_17, input_boolean.lights_room_18
#            {% elif is_state('input_select.floor_2_room_selector', '3') %}
#              input_boolean.lights_room_17, input_boolean.lights_room_18, input_boolean.lights_room_19
#            {% elif is_state('input_select.floor_2_room_selector', '4') %}
#              input_boolean.lights_room_17, input_boolean.lights_room_18, input_boolean.lights_room_19, input_boolean.lights_room_20
#            {% endif %}

  - alias: 'Floor Selector Automation All Off'
    trigger:
      - platform: state
        entity_id: input_select.floor_selector
        to: "Select"
    action:
      - service: input_select.select_option
        data:
          entity_id:
            - input_select.floor_0_room_selector
            - input_select.floor_1_room_selector
            - input_select.floor_2_room_selector
          option: Select
  - alias: 'Floor Selector 2 Floor'
    trigger:
      - platform: state
        entity_id: input_select.floor_selector
        to: "1"
    action:
      - service: input_select.select_option
        data:
          entity_id:
            - input_select.floor_1_room_selector
            - input_select.floor_2_room_selector
          option: Select
  - alias: 'Floor Selector 2 Floors'
    trigger:
      platform: state
      entity_id: input_select.floor_selector
      to: "2"
    action:
      - service: input_select.select_option
        data:
          entity_id:
            - input_select.floor_2_room_selector
          option: Select

  - alias: 'reset hidden rooms'
    trigger:
      platform: state
      entity_id: input_boolean.dummy1
      to: 'dummy_automation'
    action:
      - service: input_boolean.turn_on
        data:
          entity_id:
            - input_boolean.lights_room_01
            - input_boolean.lights_room_02
            - input_boolean.lights_room_03
            - input_boolean.lights_room_04
            - input_boolean.lights_room_05
            - input_boolean.lights_room_06
            - input_boolean.lights_room_07
            - input_boolean.lights_room_08
            - input_boolean.lights_room_09
            - input_boolean.lights_room_10
            - input_boolean.lights_room_11
            - input_boolean.lights_room_12
            - input_boolean.lights_room_13
            - input_boolean.lights_room_14
            - input_boolean.lights_room_15
            - input_boolean.lights_room_16
            - input_boolean.lights_room_17
            - input_boolean.lights_room_18
            - input_boolean.lights_room_19
            - input_boolean.lights_room_20
            - input_boolean.devices_room_01
            - input_boolean.devices_room_02
            - input_boolean.devices_room_03
            - input_boolean.devices_room_04
            - input_boolean.devices_room_05
            - input_boolean.devices_room_06
            - input_boolean.devices_room_07
            - input_boolean.devices_room_08
            - input_boolean.devices_room_09
            - input_boolean.devices_room_10
            - input_boolean.devices_room_11
            - input_boolean.devices_room_12
            - input_boolean.devices_room_13
            - input_boolean.devices_room_14
            - input_boolean.devices_room_15
            - input_boolean.devices_room_16
            - input_boolean.devices_room_17
            - input_boolean.devices_room_18
            - input_boolean.devices_room_19
            - input_boolean.devices_room_20
      - service: input_select.select_option
        data:
          entity_id: 
            - input_select.devices_floor_selector
            - input_select.lights_floor_selector
          option: "0"

  - alias: 'hki onboarding'
    trigger:
      platform: state
      entity_id: input_select.icon_selector
      to: 'nothing'
    action:
      - service: automation.trigger
        data:
          entity_id: automation.reset_button_badge_sensors
      - service: homeassistant.turn_on
        data:
          entity_id: group.header_subtitle_group
      - service: input_select.select_option
        data:
          entity_id: input_select.onboarding
          option: "Language and Icons"
      - service: input_boolean.turn_on
        data:
          entity_id:
            - input_boolean.onboarding
            - input_boolean.frontpage_header_secondary
            - input_boolean.frontpage_alarm
            - input_boolean.frontpage_weather
            - input_boolean.frontpage_photos
            - input_boolean.frontpage_buttons
            - input_boolean.button_climate_one
            - input_boolean.button_device_two
            - input_boolean.button_light_three
            - input_boolean.button_security_four
            - input_boolean.button_climate_menu_one
            - input_boolean.button_device_menu_two
            - input_boolean.button_light_menu_three
            - input_boolean.button_security_menu_four
            - input_boolean.climate_presets
            - input_boolean.climate_thermostat
            - input_boolean.climate_fans
            - input_boolean.climate_temperature
            - input_boolean.climate_humidity
            - input_boolean.climate_air_pressure
            - input_boolean.security_cameras
            - input_boolean.security_doors
            - input_boolean.security_windows
            - input_boolean.security_motion
            - input_boolean.security_other
            - input_boolean.menu_favorites
            - input_boolean.menu_all
            - input_boolean.user_content_message
            - input_boolean.system_help
            - input_boolean.system_header_sensors
            - input_boolean.weather_card
            - input_boolean.alarm_keypad
            - input_boolean.battery_battery
            - input_boolean.location_location
            - input_boolean.scenes_scenes
            - input_boolean.traffic_traffic
            - input_boolean.settings
            - input_boolean.lights_room_01
            - input_boolean.lights_room_02
            - input_boolean.lights_room_03
            - input_boolean.lights_room_04
            - input_boolean.lights_room_05
            - input_boolean.lights_room_06
            - input_boolean.lights_room_07
            - input_boolean.lights_room_08
            - input_boolean.lights_room_09
            - input_boolean.lights_room_10
            - input_boolean.lights_room_11
            - input_boolean.lights_room_12
            - input_boolean.lights_room_13
            - input_boolean.lights_room_14
            - input_boolean.lights_room_15
            - input_boolean.lights_room_16
            - input_boolean.lights_room_17
            - input_boolean.lights_room_18
            - input_boolean.lights_room_19
            - input_boolean.lights_room_20
            - input_boolean.devices_room_01
            - input_boolean.devices_room_02
            - input_boolean.devices_room_03
            - input_boolean.devices_room_04
            - input_boolean.devices_room_05
            - input_boolean.devices_room_06
            - input_boolean.devices_room_07
            - input_boolean.devices_room_08
            - input_boolean.devices_room_09
            - input_boolean.devices_room_10
            - input_boolean.devices_room_11
            - input_boolean.devices_room_12
            - input_boolean.devices_room_13
            - input_boolean.devices_room_14
            - input_boolean.devices_room_15
            - input_boolean.devices_room_16
            - input_boolean.devices_room_17
            - input_boolean.devices_room_18
            - input_boolean.devices_room_19
            - input_boolean.devices_room_20
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.person_1_entity
            - input_text.person_2_entity
            - input_text.person_3_entity
            - input_text.person_4_entity
          value: person.unknown
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.frost_protection_temperature
          value: 11
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.heat_all_temperature
          value: 22
      - service: automation.trigger
        data:
          entity_id: automation.reset_font_size
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.icon_footer_home
          value: mdi:home
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.icon_footer_menu
          value: mdi:menu
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.weather_entity
          value: weather.dark_sky
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.alarm_entity
          value: alarm_control_panel.home_alarm


  - alias: 'reset font size'
    trigger:
      platform: state
      entity_id: input_select.icon_selector
      to: 'nothing'
    action:
      - service: input_select.select_option
        data:
          entity_id:
            - input_select.name_font_size_selector
          option: 12px
      - service: input_select.select_option
        data:
          entity_id:
            - input_select.state_font_size_selector
            - input_select.label_font_size_selector
            - input_select.badge_font_size_selector
          option: 10px
      - service: input_text.set_value
        data:
          entity_id: input_text.font_family
          value: Helvetica


  - alias: 'reset button badge sensors'
    trigger:
      platform: state
      entity_id: input_select.icon_selector
      to: 'nothing'
    action:
      - service: input_text.set_value
        data:
          entity_id:
            - input_text.sensor_alarm
            - input_text.sensor_battery
            - input_text.sensor_climate
            - input_text.sensor_light
            - input_text.sensor_device
            - input_text.sensor_security
            - input_text.sensor_cleaning
            - input_text.sensor_scene
            - input_text.sensor_vacuum
            - input_text.sensor_remote
            - input_text.sensor_automation
            - input_text.sensor_calendar
            - input_text.sensor_computer
            - input_text.sensor_download
            - input_text.sensor_energy
            - input_text.sensor_floorplan
            - input_text.sensor_laundry
            - input_text.sensor_location
            - input_text.sensor_media
            - input_text.sensor_system
            - input_text.sensor_traffic
            - input_text.sensor_weather
            - input_text.sensor_button_custom_a
            - input_text.sensor_button_custom_b
            - input_text.sensor_button_custom_c
            - input_text.sensor_button_custom_d
            - input_text.sensor_button_custom_e
            - input_text.sensor_button_custom_f
            - input_text.sensor_button_custom_g
            - input_text.sensor_button_custom_h
          value: input_number.empty

  - alias: 'footer orientation'
    initial_state: 'true'
    trigger:
      - platform: state
        entity_id: input_select.footer_direction
    action:
      - service: input_select.select_option
        data_template: 
          entity_id: input_select.footer_direction_backend
          option: >
            {% if is_state('input_select.footer_direction', 'Left') %}
              false
            {% else %}
              true
            {% endif %}
  # Theme Selector
  - alias: 'themes'
    initial_state: 'true'
    trigger:
      - platform: state
        entity_id: input_boolean.day_night_cycle
      - platform: state
        entity_id: input_select.theme_selector
      - platform: state
        entity_id: input_select.theme_selector_day
      - platform: state
        entity_id: input_select.theme_selector_night
      - platform: homeassistant
        event: start
      - platform: state
        entity_id: sun.sun
    action:
      - service: frontend.set_theme
        data_template:
          name: >
            {% if (is_state('sun.sun', 'above_horizon')) and (is_state('input_boolean.day_night_cycle', 'on'))  %}
              {{ states('input_select.theme_selector_day') }}
            {% elif (is_state('sun.sun', 'below_horizon')) and (is_state('input_boolean.day_night_cycle', 'on'))  %}
              {{ states('input_select.theme_selector_night') }}
            {% else %}
              {{ states('input_select.theme_selector') }}
            {% endif %}
  
  # Box Shadow Selector
  - alias: input select beautifier box-shadow
    initial_state: 'true'
    trigger:
    - platform: state
      entity_id: input_select.box_shadow_selector
    action:
      service: input_select.select_option
      data_template:
        entity_id: input_select.box_shadow
        option: >
          {% if is_state('input_select.box_shadow_selector', 'None') %}
            none
          {% elif is_state('input_select.box_shadow_selector', 'Small') %}
            1px 1px 1px 0px rgba(0,0,0,0.5)
          {% elif is_state('input_select.box_shadow_selector', 'Standard') %}
            2px 2px 2px 0px rgba(0,0,0,0.5)
          {% elif is_state('input_select.box_shadow_selector', 'Large') %}
            3px 3px 3px 0px rgba(0,0,0,0.5)
          {% endif %}
  
  # Border Radius Selector
  - alias: input select beautifier border-radius
    initial_state: 'true'
    trigger:
    - platform: state
      entity_id: input_select.border_radius_selector
    action:
      service: input_select.select_option
      data_template:
        entity_id: input_select.border_radius
        option: >
          {% if is_state('input_select.border_radius_selector', 'None') %}
            0px
          {% elif is_state('input_select.border_radius_selector', 'Small') %}
            6px
          {% elif is_state('input_select.border_radius_selector', 'Standard') %}
            12px
          {% elif is_state('input_select.border_radius_selector', 'Large') %}
            18px
          {% endif %}

### Notification Badge Templates (needed for the badges to appear on buttons!)
### Please do NOT touch this!!!!
sensor:
  - platform: template
    sensors:
      current_lights_on:
        friendly_name: All Lights Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_lighting','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_devices_on:
        friendly_name: All Devices Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_device_switches','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_sensors_on:
        friendly_name: All Sensors Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_motion_smoke_sensors','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_binary_sensors_on:
        friendly_name: All Binary Sensors Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_binary_sensors','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_doors_open:
        friendly_name: All Doors Currently Open
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_door_sensors','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_windows_open:
        friendly_name: All Windows Currently Open
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_window_sensors','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_climate_entities_on:
        friendly_name: All Climate Entities Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_climate_entities','entity_id'))|selectattr('state','eq','heat')|list|count }}
      current_computers_on:
        friendly_name: All Computers Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_computers','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_tvs_on:
        friendly_name: All TV's Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_tvs','entity_id'))|selectattr('state','eq','on')|list|count }}
      current_laundry_devices_on:
        friendly_name: All Laundry Devices Currently On
        value_template: >-
          {{ states|selectattr('entity_id','in',state_attr('group.all_laundry_devices','entity_id'))|selectattr('state','eq','on')|list|count }}   

  - platform: scrape
    name: HKI Latest Version
    resource: https://jimz011.github.io/homekit-infused/version
    select: ".current-version h1"
    value_template: '{{ value.split(":")[1] }}'
